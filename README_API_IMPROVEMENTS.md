# LRBTeacher API è°ƒç”¨ä¼˜åŒ–æ€»ç»“

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

æ ¹æ®æ™ºè°±AIå®˜æ–¹æœ€æ–°ç¤ºä¾‹ï¼Œå¯¹é¡¹ç›®è¿›è¡Œäº†å…¨é¢çš„APIè°ƒç”¨ä¼˜åŒ–ï¼Œå®ç°äº†ï¼š
- ç»Ÿä¸€çš„æ¨¡å‹é…ç½®ç®¡ç†
- æ›´è§„èŒƒçš„APIè°ƒç”¨æ–¹å¼
- åŠ¨æ€é…ç½®åˆ‡æ¢åŠŸèƒ½
- æ”¯æŒæœ€æ–°çš„æ¨¡å‹ç‰¹æ€§

## ğŸ“‹ ä¸»è¦æ”¹è¿›

### 1. ç»Ÿä¸€é…ç½®ç®¡ç† (`config/config.py`)

```python
# æ¨¡å‹é…ç½®
DEFAULT_MODEL = "glm-4.5"  # é»˜è®¤ä½¿ç”¨çš„æ¨¡å‹
IMAGE_MODEL = "cogview-4-250304"  # å›¾åƒç”Ÿæˆæ¨¡å‹

# æ¨¡å‹è°ƒç”¨å‚æ•°é…ç½®
MODEL_PARAMS = {
    "max_tokens": 4096,      # æœ€å¤§è¾“å‡ºtokens
    "temperature": 0.7,      # æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ (0-1)
    "stream": True,          # å¯ç”¨æµå¼è¾“å‡º
}

# æ˜¯å¦å¯ç”¨æ·±åº¦æ€è€ƒæ¨¡å¼ï¼ˆä»…æ”¯æŒéƒ¨åˆ†æ¨¡å‹ï¼‰
ENABLE_THINKING = False
```

### 2. ç»Ÿä¸€APIå®¢æˆ·ç«¯ (`utils/api_client.py`)

- `create_chat_completion()` - ç»Ÿä¸€çš„èŠå¤©å®ŒæˆAPIè°ƒç”¨
- `create_image_generation()` - ç»Ÿä¸€çš„å›¾åƒç”ŸæˆAPIè°ƒç”¨
- æ”¯æŒè¿è¡Œæ—¶é…ç½®åŠ¨æ€åˆ‡æ¢
- è‡ªåŠ¨å¤„ç†æ·±åº¦æ€è€ƒæ¨¡å¼

### 3. åŠ¨æ€é…ç½®ç®¡ç† (`utils/config_manager.py`)

- ä¾§è¾¹æ é…ç½®é¢æ¿
- å®æ—¶åˆ‡æ¢æ¨¡å‹å’Œå‚æ•°
- é…ç½®ä¿å­˜å’Œé‡ç½®åŠŸèƒ½
- å¯è§†åŒ–å‚æ•°è°ƒæ•´

### 4. æ”¹è¿›çš„æµå¼å“åº”å¤„ç†

```python
# ä¼˜åŒ–å‰
for chunk in response:
    if chunk == "[DONE]":
        break
    if hasattr(chunk, 'choices') and chunk.choices:
        delta = chunk.choices[0].delta
        if delta and hasattr(delta, 'content'):
            content = delta.content

# ä¼˜åŒ–å
for chunk in response:
    if chunk.choices[0].delta.content:
        content = chunk.choices[0].delta.content
```

## ğŸ”§ å·²æ›´æ–°çš„æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶
- `config/config.py` - æ–°å¢æ¨¡å‹å‚æ•°é…ç½®
- `utils/api_client.py` - ç»Ÿä¸€APIè°ƒç”¨å®¢æˆ·ç«¯
- `utils/config_manager.py` - é…ç½®ç®¡ç†å·¥å…·
- `main.py` - é›†æˆé…ç½®é¢æ¿

### æ–¹æ³•æ–‡ä»¶
- `methods/assessment_teaching.py` - è¯„ä¼°å¼æ•™å­¦
- `methods/simulate_teaching.py` - æ¨¡æ‹Ÿæ•™å­¦
- `methods/interactive_teaching.py` - äº’åŠ¨å¼æ•™å­¦
- `methods/exercise_teaching.py` - ç»ƒä¹ å¼æ•™å­¦
- `methods/knowledge_summary.py` - çŸ¥è¯†æ€»ç»“
- `utils/chat_helpers.py` - èŠå¤©è¾…åŠ©å·¥å…·

### å…¶ä»–åº”ç”¨æ–‡ä»¶
- `know_app.py` - çŸ¥è¯†åº”ç”¨
- `quiz_app.py` - æµ‹éªŒåº”ç”¨
- `know_app copy.py` - çŸ¥è¯†åº”ç”¨å‰¯æœ¬
- `draw.py` - ç»˜å›¾åŠŸèƒ½

## ğŸš€ æ–°åŠŸèƒ½ç‰¹æ€§

### 1. åŠ¨æ€æ¨¡å‹åˆ‡æ¢
åœ¨ä¾§è¾¹æ å¯ä»¥å®æ—¶åˆ‡æ¢ï¼š
- èŠå¤©æ¨¡å‹ (glm-4.5, GLM-4-Plus, glm-3-turbo)
- å›¾åƒæ¨¡å‹ (cogview-4-250304, CogView-3-Plus)

### 2. å‚æ•°å®æ—¶è°ƒæ•´
- Temperature (0.0-1.0)
- Max Tokens (100-8192)
- æµå¼è¾“å‡ºå¼€å…³
- æ·±åº¦æ€è€ƒæ¨¡å¼å¼€å…³

### 3. æ·±åº¦æ€è€ƒæ¨¡å¼
- æ”¯æŒ glm-4.5 å’Œ glm-4-plus æ¨¡å‹
- æä¾›æ›´æ·±å…¥çš„æ¨ç†èƒ½åŠ›
- å¯é€šè¿‡é…ç½®é¢æ¿ä¸€é”®å¯ç”¨

### 4. é…ç½®æŒä¹…åŒ–
- é…ç½®ä¿å­˜åˆ° session state
- æ”¯æŒé‡ç½®ä¸ºé»˜è®¤é…ç½®
- å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨

1. **å¯åŠ¨åº”ç”¨**ï¼š
   ```bash
   streamlit run main.py
   ```

2. **é…ç½®æ¨¡å‹**ï¼š
   - åœ¨ä¾§è¾¹æ æ‰¾åˆ°"âš™ï¸ æ¨¡å‹é…ç½®"é¢æ¿
   - é€‰æ‹©æ‰€éœ€çš„æ¨¡å‹å’Œå‚æ•°
   - ç‚¹å‡»"ğŸ’¾ ä¿å­˜é…ç½®"

3. **ä½¿ç”¨åŠŸèƒ½**ï¼š
   - æ‰€æœ‰æ•™å­¦æ–¹æ³•ä¼šè‡ªåŠ¨ä½¿ç”¨æ–°é…ç½®
   - å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯åº”ç”¨

### é«˜çº§é…ç½®

1. **å¯ç”¨æ·±åº¦æ€è€ƒæ¨¡å¼**ï¼š
   - é€‰æ‹©æ”¯æŒçš„æ¨¡å‹ (glm-4.5 æˆ– glm-4-plus)
   - å‹¾é€‰"å¯ç”¨æ·±åº¦æ€è€ƒæ¨¡å¼"
   - ä¿å­˜é…ç½®

2. **è°ƒæ•´ç”Ÿæˆå‚æ•°**ï¼š
   - Temperature: æ§åˆ¶è¾“å‡ºéšæœºæ€§
   - Max Tokens: æ§åˆ¶è¾“å‡ºé•¿åº¦
   - æµå¼è¾“å‡º: æ§åˆ¶å“åº”æ–¹å¼

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### APIè°ƒç”¨ç¤ºä¾‹

```python
from utils.api_client import create_chat_completion

# åŸºæœ¬è°ƒç”¨
response = create_chat_completion(
    messages=[{"role": "user", "content": "ä½ å¥½"}],
    stream=True
)

# è‡ªå®šä¹‰å‚æ•°
response = create_chat_completion(
    messages=messages,
    temperature=0.8,
    max_tokens=2048,
    stream=False
)
```

### é…ç½®è·å–

```python
from utils.config_manager import get_current_config

config = get_current_config()
current_model = config["DEFAULT_MODEL"]
```

## ğŸ‰ ä¼˜åŠ¿æ€»ç»“

1. **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰æ¨¡å‹é…ç½®é›†ä¸­ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
2. **åŠ¨æ€åˆ‡æ¢**ï¼šæ— éœ€ä¿®æ”¹ä»£ç å³å¯åˆ‡æ¢æ¨¡å‹å’Œå‚æ•°
3. **ç”¨æˆ·å‹å¥½**ï¼šå¯è§†åŒ–é…ç½®ç•Œé¢ï¼Œæ“ä½œç®€å•
4. **ç¬¦åˆè§„èŒƒ**ï¼šéµå¾ªæ™ºè°±AIå®˜æ–¹æœ€æ–°ç¤ºä¾‹
5. **åŠŸèƒ½å®Œæ•´**ï¼šæ”¯æŒæ‰€æœ‰æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ·±åº¦æ€è€ƒæ¨¡å¼
6. **å‘åå…¼å®¹**ï¼šä¿æŒåŸæœ‰åŠŸèƒ½ä¸å˜ï¼Œåªæ˜¯ä¼˜åŒ–äº†å®ç°æ–¹å¼

## ğŸ”® æœªæ¥æ‰©å±•

- æ”¯æŒæ›´å¤šæ¨¡å‹ç±»å‹
- æ·»åŠ é…ç½®å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
- æ”¯æŒå¤šç”¨æˆ·é…ç½®ç®¡ç†
- æ·»åŠ æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡
- é›†æˆæ›´å¤šæ™ºè°±AIæ–°åŠŸèƒ½